<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="color-scheme" content="only light">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

  <title>Will You Be My Diamond?</title>
  <style>
    :root {
      color-scheme: light;
      --force-light-bg: #ffe6eb;
      --force-light-text: red;
    }

    html,
    body {
      background-color: var(--force-light-bg) !important;
      color: var(--force-light-text) !important;
    }

    @media (prefers-color-scheme: dark) {

      html,
      body {
        background-color: var(--force-light-bg) !important;
        color: var(--force-light-text) !important;
      }
    }

    body {
      margin: 0;
      background-color: #ffe6eb;
      color: red;
      font-family: 'Pacifico', cursive;
      text-align: center;
      overflow: hidden;
    }

    body,
    button,
    .speech-bubble,
    .final {
      font-family: 'Pacifico', cursive;
    }

    .loader {
      height: 100vh;
      display: none;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      flex-direction: column;
      position: relative;
      z-index: 2;
    }

    .main-content {
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      position: relative;
      z-index: 2;
    }

    .question-container {
      max-width: 90%;
      margin-top: 40px;
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .speech-bubble {
      background: #ffe6eb;
      border: 2px solid red;
      border-radius: 15px;
      padding: 15px 25px;
      font-size: 1.5rem;
      white-space: pre-line;
      max-width: 300px;
      margin-bottom: 20px;
    }

    .answers button {
      padding: 10px 20px;
      font-size: 1rem;
      margin: 8px;
      border: none;
      border-radius: 20px;
      background-color: black;
      color: white;
      cursor: pointer;
      min-width: 100px;
    }

    .answers button:hover {
      background-color: crimson;
    }

    .final {
      font-size: 2.5rem;
      color: red;
      opacity: 0;
      transform: scale(0.5);
      transition: all 1s ease;
      white-space: pre-line;
      margin-top: 40px;
      max-width: 90%;
      position: relative;
      z-index: 2;
    }

    .final.show {
      opacity: 1;
      transform: scale(1);
    }

    .accept-btn {
      display: none;
      margin-top: 30px;
      padding: 15px 40px;
      font-size: 1.2rem;
      color: white;
      background-color: black;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      position: relative;
      z-index: 2;
    }

    .hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      rotate: 45deg;
    }

    .heart {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: red;
      transform: rotate(45deg);
      animation: floatHearts 10s linear infinite;
    }

    .heart::before,
    .heart::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: red;
      border-radius: 50%;
    }

    .heart::before {
      top: -10px;
      left: 0;
    }

    .heart::after {
      top: 0;
      left: -10px;
    }

    @keyframes floatHearts {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }

      100% {
        transform: translateY(-100vh) scale(1.5);
        opacity: 0;
      }
    }


    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: scale(0.8);
      }

      100% {
        opacity: 1;
        transform: scale(1);
      }
    }


    .penguin {
      position: fixed;
      width: 60px;
      z-index: 2;
      animation: wander 20s linear infinite;
    }

    @keyframes wander {
      0% {
        left: 5vw;
        top: 10vh;
        transform: rotate(0deg);
      }

      20% {
        left: 40vw;
        top: 20vh;
        transform: rotate(90deg);
      }

      40% {
        left: 70vw;
        top: 50vh;
        transform: rotate(180deg);
      }

      60% {
        left: 30vw;
        top: 70vh;
        transform: rotate(270deg);
      }

      80% {
        left: 10vw;
        top: 40vh;
        transform: rotate(360deg);
      }

      100% {
        left: 5vw;
        top: 10vh;
        transform: rotate(0deg);
      }
    }

    @keyframes popHeart {
      0% {
        transform: scale(0.5) rotate(45deg);
        opacity: 1;
      }

      70% {
        transform: scale(2) rotate(45deg);
        opacity: 1;
      }

      100% {
        transform: scale(2.5) rotate(45deg);
        opacity: 0;
      }
    }
  </style>
</head>

<body>

  <div class="loader" id="loader">Preparing something lovely<br> for you...</div>

  <div class="main-content" id="main">
    <div class="question-container" id="quiz">
      <div class="speech-bubble" id="question"></div>
      <div class="answers" id="answers"></div>
    </div>
    <div class="final" id="final"></div>
    <button class="accept-btn" id="acceptBtn">I lost words</button>

  </div>

  <div class="hearts" id="hearts"></div>
  <img class="penguin" src="https://i.ibb.co/kgDgBcYr/360-F-910562062-011-At-TMC7-MDv-X1k-C7plgt-Fe-EInp9-Ooc-U.png"
    alt="Penguin" onclick="showPenguinMessage()" />



  <audio id="clickSound" src="click.mp3" preload="auto"></audio>
  <audio id="bgMusic" src="bg.mp3" preload="auto"></audio>

  <script>
    const questions = [
      { q: "How do penguins prove love?", options: ["Flowers", "Round rock", "Fish"], answer: "Round rock" },
      { q: "She bought us lime juice from?", options: ["Roots", "Keels", "Bakers"], answer: "Roots" },
      { q: "The red heart was made of?", options: ["Ink", "Pebbles", "Pixels"], answer: "Pebbles" },
      { q: "Void loop() {...} ?", options: ["printf()", "scanf()", "♥️"], answer: "♥️" },
      { q: "The girl in his head is?", options: ["Dimanya", "Dimanya", "Dimanya"], answer: "Dimanya" }
    ];

    let current = 0;

    function playClickSound() {
      const audio = document.getElementById('clickSound');
      if (audio) {
        audio.currentTime = 0;
        audio.play();
      }
    }

    function showQuestion() {
      const qBox = document.getElementById('question');
      const aBox = document.getElementById('answers');
      qBox.style.opacity = 0;
      aBox.innerHTML = '';

      setTimeout(() => {
        qBox.textContent = questions[current].q;
        qBox.style.opacity = 1;

        questions[current].options.forEach(opt => {
          const btn = document.createElement('button');
          btn.textContent = opt;
          btn.onclick = (e) => {
            playClickSound();
            // Heart pop at click
            const rect = e.target.getBoundingClientRect();
            createHeartAt(rect.left + rect.width / 2, rect.top + rect.height / 2);

            if (opt === questions[current].answer) {
              setTimeout(() => {
                current++;
                if (current >= questions.length) {
                  document.getElementById('quiz').style.display = 'none';
                  showFinalQuestion();
                } else {
                  showQuestion();
                }
              }, 800);
            } else {
              alert('Try again 💕');
            }
          };
          aBox.appendChild(btn);
        });
      }, 1000);
    }

    function showFinalQuestion() {
      const finalDiv = document.getElementById('final');
      const acceptBtn = document.getElementById('acceptBtn');
      const lines = ["Will", "You", "Be", "My", "Diamond?"];
      let idx = 0;

      function typeLine() {
        if (idx < lines.length) {
          const word = document.createElement('div');
          word.textContent = lines[idx];
          word.style.fontWeight = 'bold';
          word.style.fontSize = '2.2rem';
          finalDiv.appendChild(word);
          idx++;
          setTimeout(typeLine, 1000);
        } else {
          finalDiv.classList.add('show');
          setTimeout(() => {
            acceptBtn.style.display = 'inline-block';
          }, 6000);
        }
      }

      finalDiv.innerHTML = '';
      typeLine();
    }



    function handleAccept(e) {
      playClickSound();

      const rect = e.target.getBoundingClientRect();
      createHeartAt(rect.left + rect.width / 2, rect.top + rect.height / 2);

      const btn = document.getElementById('acceptBtn');
      btn.style.display = 'none';

      const finalDiv = document.getElementById('final');
      finalDiv.innerHTML = '';

      // Message 1
      const msg1 = document.createElement('div');
      msg1.textContent = 'Now Dimaa says<br>"Yes I will"';
      msg1.style.fontSize = '1.8rem';
      msg1.style.marginTop = '20px';
      msg1.style.animation = 'fadeIn 0.5s ease forwards';
      finalDiv.appendChild(msg1);
      finalDiv.classList.add('show');

      setTimeout(() => {
        msg1.remove();

        // Message 2 - word by word
        const line = "Now you are THE GIRLFRIEND 😘".split(" ");
        let i = 0;

        function showWord() {
          if (i < line.length) {
            const word = document.createElement('div');
            word.textContent = line[i];
            word.style.fontSize = '2rem';
            word.style.fontWeight = 'bold';
            word.style.marginTop = '8px';
            word.style.animation = 'fadeIn 0.5s ease forwards';
            finalDiv.appendChild(word);
            i++;
            setTimeout(showWord, 800);
          } else {
            // After all words shown, create "Shall we?" button
            const shallWeBtn = document.createElement('button');
            shallWeBtn.textContent = 'Shall we?';
            shallWeBtn.style.marginTop = '30px';
            shallWeBtn.style.padding = '15px 40px';
            shallWeBtn.style.fontSize = '1.2rem';
            shallWeBtn.style.color = 'white';
            shallWeBtn.style.backgroundColor = 'black';
            shallWeBtn.style.border = 'none';
            shallWeBtn.style.borderRadius = '30px';
            shallWeBtn.style.cursor = 'pointer';
            finalDiv.appendChild(shallWeBtn);

            shallWeBtn.addEventListener('click', () => {
              playClickSound();
              const phoneNumber = '94779392448';
              const message = encodeURIComponent("Hi Mr. BOYFRIEND //dont lose words now");
              const url = `https://wa.me/${phoneNumber}?text=${message}`;
              window.open(url, '_blank');
            });
          }
        }

        showWord();
      }, 4000);
    }


    function showPenguinMessage() {
      const finalDiv = document.getElementById('final');

      const msg = document.createElement('div');
      msg.textContent = "Hey sleeping beauty, don’t get distracted by the Handsome penguin 🐧";
      msg.style.fontSize = '1.4rem';
      msg.style.marginTop = '20px';
      msg.style.animation = 'fadeIn 0.5s ease forwards';
      msg.style.transition = 'opacity 0.5s ease';
      msg.style.opacity = '1';

      finalDiv.appendChild(msg);
      finalDiv.classList.add('show');

      setTimeout(() => {
        msg.style.opacity = '0';
        setTimeout(() => {
          msg.remove();
        }, 500); // wait for fade out to complete
      }, 3000);
    }

    function createHeart() {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.top = '100vh';
      heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
      document.getElementById('hearts').appendChild(heart);
      setTimeout(() => heart.remove(), 10000);
    }

    function createHeartAt(x, y) {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.style.left = x + 'px';
      heart.style.top = y + 'px';
      heart.style.position = 'fixed';
      heart.style.animation = 'popHeart 1s ease forwards';
      heart.style.zIndex = 10;
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 1000);
    }

    setInterval(createHeart, 300);

    // Show the "Ready" question on load
    function showReadyQuestion() {
      const qBox = document.getElementById('question');
      const aBox = document.getElementById('answers');
      qBox.style.opacity = 0;
      aBox.innerHTML = '';

      setTimeout(() => {
        qBox.textContent = "Happy Birthday My Euphoria,\nAre you ready?";
        qBox.style.opacity = 1;

        const readyBtn = document.createElement('button');
        readyBtn.textContent = "Ready";
        readyBtn.onclick = () => {
          playClickSound();
          startExperience();
        };
        aBox.appendChild(readyBtn);
      }, 1000);
    }

    // Start music, show loader, then questions
    function startExperience() {
      const loader = document.getElementById('loader');
      const main = document.getElementById('main');
      const bgMusic = document.getElementById('bgMusic');

      if (bgMusic) {
        bgMusic.volume = 0.3;
        bgMusic.currentTime = 0;
        bgMusic.play().catch(() => {
          // Ignore autoplay errors
        });

        // Stop after one loop
        bgMusic.onended = function () {
          bgMusic.pause();
          bgMusic.currentTime = 0;
        };
      }

      document.getElementById('quiz').style.display = 'flex';
      document.getElementById('final').innerHTML = '';
      document.getElementById('acceptBtn').style.display = 'none';
      current = 0;

      // Hide quiz & show loader text for 5 seconds
      document.getElementById('quiz').style.display = 'none';
      loader.style.display = 'flex';

      setTimeout(() => {
        loader.style.display = 'none';
        document.getElementById('quiz').style.display = 'flex';
        showQuestion();
      }, 5000);
    }

    window.onload = () => {
      const loader = document.getElementById('loader');
      const main = document.getElementById('main');

      main.style.display = 'flex';
      loader.style.display = 'none';

      showReadyQuestion();
    };

    document.getElementById('acceptBtn').addEventListener('click', function (e) {
      handleAccept(e);
    });

  </script>

</body>

</html>
